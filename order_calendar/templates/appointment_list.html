{% extends "base.html" %}

{% block content %}
    <div class="content-wrapper">
        <h1>Kalendář termínů objednaných pacientů</h1>
        <div class="appointments-list">
            {% for appointment in appointments %}
                <div class="appointment-item">
                    <h2>{{ appointment.service }}</h2>
                    <p><strong>Doktor:</strong> {{ appointment.doctor.surname }} {{ appointment.doctor.name }}</p>
                    <p><strong>Pacient:</strong> {{ appointment.patient.surname }} {{ appointment.patient.name }}</p>
                    <p><strong>{{ appointment.day }} at {{ appointment.time }}</strong></p>
                    <p>Vytvořeno: {{ appointment.time_ordered }}</p>
                    {% if perms.order_calendar.change_appointment %}
                        <div class="appointment-actions">
                            <a href="{% url 'appointment_edit' appointment.pk %}">Upravit</a>
                            <a href="{% url 'appointment_delete' appointment.pk %}">Smazat</a>
                        </div>
                    {% endif %}
                </div>
            {% endfor %}
        </div>
        {% if perms.order_calendar.add_appointment %}
            <div class="appointment-create">
                <a href="{% url 'appointment_create' %}" class="button">Objednat pacienta</a>
            </div>
        {% endif %}
    </div>
{% endblock %}
